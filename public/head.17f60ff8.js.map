{"mappings":"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","sources":["<anon>","src/RUM.js"],"sourcesContent":["var $46dc8ff3de18a85d$exports = {};\n/**\n * log RUM if part of the sample.\n * @param {string} checkpoint identifies the checkpoint in funnel\n * @param {Object} data additional data for RUM sample\n * @param {string} data.source DOM node that is the source of a checkpoint event,\n * identified by #id or .classname\n * @param {string} data.target subject of the checkpoint event,\n * for instance the href of a link, or a search term\n */ function $46dc8ff3de18a85d$var$sampleRUM(checkpoint, data = {}) {\n    $46dc8ff3de18a85d$var$sampleRUM.defer = $46dc8ff3de18a85d$var$sampleRUM.defer || [];\n    const defer = (fnname)=>{\n        $46dc8ff3de18a85d$var$sampleRUM[fnname] = $46dc8ff3de18a85d$var$sampleRUM[fnname] || ((...args)=>$46dc8ff3de18a85d$var$sampleRUM.defer.push({\n                fnname: fnname,\n                args: args\n            }));\n    };\n    $46dc8ff3de18a85d$var$sampleRUM.drain = $46dc8ff3de18a85d$var$sampleRUM.drain || ((dfnname, fn)=>{\n        $46dc8ff3de18a85d$var$sampleRUM[dfnname] = fn;\n        $46dc8ff3de18a85d$var$sampleRUM.defer.filter(({ fnname: fnname })=>dfnname === fnname).forEach(({ fnname: fnname, args: args })=>$46dc8ff3de18a85d$var$sampleRUM[fnname](...args));\n    });\n    $46dc8ff3de18a85d$var$sampleRUM.always = $46dc8ff3de18a85d$var$sampleRUM.always || [];\n    $46dc8ff3de18a85d$var$sampleRUM.always.on = (chkpnt, fn)=>{\n        $46dc8ff3de18a85d$var$sampleRUM.always[chkpnt] = fn;\n    };\n    $46dc8ff3de18a85d$var$sampleRUM.on = (chkpnt, fn)=>{\n        $46dc8ff3de18a85d$var$sampleRUM.cases[chkpnt] = fn;\n    };\n    defer(\"observe\");\n    defer(\"cwv\");\n    try {\n        window.hlx = window.hlx || {};\n        if (!window.hlx.rum) {\n            const usp = new URLSearchParams(window.location.search);\n            const weight = usp.get(\"rum\") === \"on\" ? 1 : 100; // with parameter, weight is 1. Defaults to 100.\n            const id = Array.from({\n                length: 75\n            }, (_, i)=>String.fromCharCode(48 + i)).filter((a)=>/\\d|[A-Z]/i.test(a)).filter(()=>Math.random() * 75 > 70).join(\"\");\n            const random = Math.random();\n            const isSelected = random * weight < 1;\n            const firstReadTime = Date.now();\n            const urlSanitizers = {\n                full: ()=>window.location.href,\n                origin: ()=>window.location.origin,\n                path: ()=>window.location.href.replace(/\\?.*$/, \"\")\n            };\n            // eslint-disable-next-line object-curly-newline, max-len\n            window.hlx.rum = {\n                weight: weight,\n                id: id,\n                random: random,\n                isSelected: isSelected,\n                firstReadTime: firstReadTime,\n                sampleRUM: $46dc8ff3de18a85d$var$sampleRUM,\n                sanitizeURL: urlSanitizers[window.hlx.RUM_MASK_URL || \"path\"]\n            };\n        }\n        const { weight: weight, id: id, firstReadTime: firstReadTime } = window.hlx.rum;\n        if (window.hlx && window.hlx.rum && window.hlx.rum.isSelected) {\n            const knownProperties = [\n                \"weight\",\n                \"id\",\n                \"referer\",\n                \"checkpoint\",\n                \"t\",\n                \"source\",\n                \"target\",\n                \"cwv\",\n                \"CLS\",\n                \"FID\",\n                \"LCP\",\n                \"INP\"\n            ];\n            const sendPing = (pdata = data)=>{\n                // eslint-disable-next-line object-curly-newline, max-len, no-use-before-define\n                const body = JSON.stringify({\n                    weight: weight,\n                    id: id,\n                    referer: window.hlx.rum.sanitizeURL(),\n                    checkpoint: checkpoint,\n                    t: Date.now() - firstReadTime,\n                    ...data\n                }, knownProperties);\n                const url = `https://rum.hlx.page/.rum/${weight}`;\n                // eslint-disable-next-line no-unused-expressions\n                navigator.sendBeacon(url, body);\n                // eslint-disable-next-line no-console\n                console.debug(`ping:${checkpoint}`, pdata);\n            };\n            $46dc8ff3de18a85d$var$sampleRUM.cases = $46dc8ff3de18a85d$var$sampleRUM.cases || {\n                cwv: ()=>$46dc8ff3de18a85d$var$sampleRUM.cwv(data) || true,\n                lazy: ()=>{\n                    // use classic script to avoid CORS issues\n                    const script = document.createElement(\"script\");\n                    script.src = \"https://rum.hlx.page/.rum/@adobe/helix-rum-enhancer@^1/src/index.js\";\n                    document.head.appendChild(script);\n                    return true;\n                }\n            };\n            sendPing(data);\n            if ($46dc8ff3de18a85d$var$sampleRUM.cases[checkpoint]) $46dc8ff3de18a85d$var$sampleRUM.cases[checkpoint]();\n        }\n        if ($46dc8ff3de18a85d$var$sampleRUM.always[checkpoint]) $46dc8ff3de18a85d$var$sampleRUM.always[checkpoint](data);\n    } catch (error) {\n    // something went wrong\n    }\n}\n/**\n * Setup block utils.\n */ function $46dc8ff3de18a85d$var$setup() {\n    window.hlx = window.hlx || {};\n    window.hlx.RUM_MASK_URL = \"full\";\n    window.hlx.codeBasePath = \"\";\n    window.hlx.lighthouse = new URLSearchParams(window.location.search).get(\"lighthouse\") === \"on\";\n}\n/**\n * Auto initializiation.\n */ function $46dc8ff3de18a85d$var$init() {\n    $46dc8ff3de18a85d$var$setup();\n    $46dc8ff3de18a85d$var$sampleRUM(\"top\");\n    window.addEventListener(\"load\", ()=>$46dc8ff3de18a85d$var$sampleRUM(\"load\"));\n    window.addEventListener(\"unhandledrejection\", (event)=>{\n        $46dc8ff3de18a85d$var$sampleRUM(\"error\", {\n            source: event.reason.sourceURL,\n            target: event.reason.line\n        });\n    });\n    window.addEventListener(\"error\", (event)=>{\n        $46dc8ff3de18a85d$var$sampleRUM(\"error\", {\n            source: event.filename,\n            target: event.lineno\n        });\n    });\n}\n$46dc8ff3de18a85d$var$init();\n\n\n//# sourceMappingURL=head.17f60ff8.js.map\n","/**\n * log RUM if part of the sample.\n * @param {string} checkpoint identifies the checkpoint in funnel\n * @param {Object} data additional data for RUM sample\n * @param {string} data.source DOM node that is the source of a checkpoint event,\n * identified by #id or .classname\n * @param {string} data.target subject of the checkpoint event,\n * for instance the href of a link, or a search term\n */\nfunction sampleRUM(checkpoint, data = {}) {\n  sampleRUM.defer = sampleRUM.defer || [];\n  const defer = (fnname) => {\n    sampleRUM[fnname] =\n      sampleRUM[fnname] ||\n      ((...args) => sampleRUM.defer.push({ fnname, args }));\n  };\n  sampleRUM.drain =\n    sampleRUM.drain ||\n    ((dfnname, fn) => {\n      sampleRUM[dfnname] = fn;\n      sampleRUM.defer\n        .filter(({ fnname }) => dfnname === fnname)\n        .forEach(({ fnname, args }) => sampleRUM[fnname](...args));\n    });\n  sampleRUM.always = sampleRUM.always || [];\n  sampleRUM.always.on = (chkpnt, fn) => {\n    sampleRUM.always[chkpnt] = fn;\n  };\n  sampleRUM.on = (chkpnt, fn) => {\n    sampleRUM.cases[chkpnt] = fn;\n  };\n  defer(\"observe\");\n  defer(\"cwv\");\n  try {\n    window.hlx = window.hlx || {};\n    if (!window.hlx.rum) {\n      const usp = new URLSearchParams(window.location.search);\n      const weight = usp.get(\"rum\") === \"on\" ? 1 : 100; // with parameter, weight is 1. Defaults to 100.\n      const id = Array.from({ length: 75 }, (_, i) =>\n        String.fromCharCode(48 + i)\n      )\n        .filter((a) => /\\d|[A-Z]/i.test(a))\n        .filter(() => Math.random() * 75 > 70)\n        .join(\"\");\n      const random = Math.random();\n      const isSelected = random * weight < 1;\n      const firstReadTime = Date.now();\n      const urlSanitizers = {\n        full: () => window.location.href,\n        origin: () => window.location.origin,\n        path: () => window.location.href.replace(/\\?.*$/, \"\"),\n      };\n      // eslint-disable-next-line object-curly-newline, max-len\n      window.hlx.rum = {\n        weight,\n        id,\n        random,\n        isSelected,\n        firstReadTime,\n        sampleRUM,\n        sanitizeURL: urlSanitizers[window.hlx.RUM_MASK_URL || \"path\"],\n      };\n    }\n    const { weight, id, firstReadTime } = window.hlx.rum;\n    if (window.hlx && window.hlx.rum && window.hlx.rum.isSelected) {\n      const knownProperties = [\n        \"weight\",\n        \"id\",\n        \"referer\",\n        \"checkpoint\",\n        \"t\",\n        \"source\",\n        \"target\",\n        \"cwv\",\n        \"CLS\",\n        \"FID\",\n        \"LCP\",\n        \"INP\",\n      ];\n      const sendPing = (pdata = data) => {\n        // eslint-disable-next-line object-curly-newline, max-len, no-use-before-define\n        const body = JSON.stringify(\n          {\n            weight,\n            id,\n            referer: window.hlx.rum.sanitizeURL(),\n            checkpoint,\n            t: Date.now() - firstReadTime,\n            ...data,\n          },\n          knownProperties\n        );\n        const url = `https://rum.hlx.page/.rum/${weight}`;\n        // eslint-disable-next-line no-unused-expressions\n        navigator.sendBeacon(url, body);\n        // eslint-disable-next-line no-console\n        console.debug(`ping:${checkpoint}`, pdata);\n      };\n      sampleRUM.cases = sampleRUM.cases || {\n        cwv: () => sampleRUM.cwv(data) || true,\n        lazy: () => {\n          // use classic script to avoid CORS issues\n          const script = document.createElement(\"script\");\n          script.src =\n            \"https://rum.hlx.page/.rum/@adobe/helix-rum-enhancer@^1/src/index.js\";\n          document.head.appendChild(script);\n          return true;\n        },\n      };\n      sendPing(data);\n      if (sampleRUM.cases[checkpoint]) {\n        sampleRUM.cases[checkpoint]();\n      }\n    }\n    if (sampleRUM.always[checkpoint]) {\n      sampleRUM.always[checkpoint](data);\n    }\n  } catch (error) {\n    // something went wrong\n  }\n}\n\n/**\n * Setup block utils.\n */\nfunction setup() {\n  window.hlx = window.hlx || {};\n  window.hlx.RUM_MASK_URL = \"full\";\n  window.hlx.codeBasePath = \"\";\n  window.hlx.lighthouse =\n    new URLSearchParams(window.location.search).get(\"lighthouse\") === \"on\";\n}\n\n/**\n * Auto initializiation.\n */\n\nfunction init() {\n  setup();\n  sampleRUM(\"top\");\n\n  window.addEventListener(\"load\", () => sampleRUM(\"load\"));\n\n  window.addEventListener(\"unhandledrejection\", (event) => {\n    sampleRUM(\"error\", {\n      source: event.reason.sourceURL,\n      target: event.reason.line,\n    });\n  });\n\n  window.addEventListener(\"error\", (event) => {\n    sampleRUM(\"error\", { source: event.filename, target: event.lineno });\n  });\n}\n\ninit();\n"],"names":["$46dc8ff3de18a85d$var$sampleRUM","checkpoint","data","defer","fnname","args","push","drain","dfnname","fn","filter","forEach","always","on","chkpnt","cases","window","hlx","rum","usp","URLSearchParams","location","search","weight","get","id","Array","from","length","_","i","String","fromCharCode","a","test","Math","random","join","firstReadTime","Date","now","isSelected","sampleRUM","sanitizeURL","urlSanitizers","full","href","origin","path","replace","RUM_MASK_URL","knownProperties","cwv","lazy","script","document","createElement","src","head","appendChild","sendPing","pdata","body","JSON","stringify","referer","t","url","navigator","sendBeacon","console","debug","error","codeBasePath","lighthouse","addEventListener","event","source","reason","sourceURL","target","line","filename","lineno"],"version":3,"file":"head.17f60ff8.js.map"}